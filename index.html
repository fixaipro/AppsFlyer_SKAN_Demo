<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AppsFlyer SKAN Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            animation: slideIn 0.6s ease;
        }

        .nav-tab {
            background: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #667eea;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .content-panel {
            background: white;
            border-radius: 0 10px 10px 10px;
            padding: 30px;
            min-height: 500px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            animation: fadeInUp 0.7s ease;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: contentFade 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes contentFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section-title {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, #764ba2, transparent);
        }

        .info-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .info-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .flow-diagram {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .flow-step {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .flow-step:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .flow-arrow {
            text-align: center;
            color: #667eea;
            font-size: 24px;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(5px); }
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            overflow-x: auto;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
        }

        .code-language {
            color: #66d9ef;
            font-weight: bold;
        }

        .copy-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #764ba2;
            transform: scale(1.05);
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .keyword { color: #66d9ef; }
        .string { color: #a6e22e; }
        .comment { color: #75715e; }
        .function { color: #fd971f; }

        .schema-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .schema-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .schema-card::before {
            content: '';
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: top 0.3s ease;
            z-index: 0;
        }

        .schema-card:hover::before {
            top: 0;
        }

        .schema-card:hover {
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .schema-card * {
            position: relative;
            z-index: 1;
        }

        .bit-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .schema-card:hover .bit-value {
            color: white;
        }

        .event-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .event-type {
            font-size: 12px;
            color: #666;
        }

        .schema-card:hover .event-type {
            color: rgba(255,255,255,0.9);
        }

        .interactive-demo {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }

        .demo-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .demo-btn {
            background: white;
            color: #f5576c;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .demo-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(245, 87, 108, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.5s ease, height 0.5s ease;
        }

        .demo-btn:hover::after {
            width: 300px;
            height: 300px;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .demo-output {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
            backdrop-filter: blur(10px);
        }

        .highlight {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            padding: 2px 8px;
            border-radius: 5px;
            color: #2d3436;
            font-weight: 600;
            display: inline-block;
            margin: 2px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            animation: blink 2s infinite;
        }

        .status-granted {
            background: #00b894;
        }

        .status-denied {
            background: #ff7675;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .accordion {
            margin: 20px 0;
        }

        .accordion-item {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .accordion-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .accordion-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            background: #f8f9fa;
        }

        .accordion-content.active {
            padding: 20px;
            max-height: 50000px;
        }

        .accordion-arrow {
            transition: transform 0.3s ease;
        }

        .accordion-arrow.active {
            transform: rotate(180deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ AppsFlyer SKAN Interactive Demo</h1>
            <p>Complete Technical Guide for App Development Teams</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="overview">üìä SKAN Overview</button>
            <button class="nav-tab" data-tab="appsflyer">üéØ AppsFlyer SKAN</button>
            <button class="nav-tab" data-tab="implementation">üíª Flutter Implementation</button>
            <button class="nav-tab" data-tab="configuration">‚öôÔ∏è Configuration</button>
            <button class="nav-tab" data-tab="demo">üéÆ Interactive Demo</button>
        </div>

        <div class="content-panel">
            <!-- SKAN Overview Tab -->
            <div id="overview" class="tab-content active">
                <h2 class="section-title">What is SKAdNetwork (SKAN)?</h2>
                
                <div class="info-card">
                    <h3>üì± Introduction</h3>
                    <p>SKAdNetwork is Apple's privacy-preserving attribution framework introduced to maintain user privacy while enabling app install attribution and campaign measurement.</p>
                </div>

                <div class="info-card">
                    <h3>üîí Why Was SKAN Introduced?</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>iOS 14.5+ App Tracking Transparency (ATT) framework</li>
                        <li>User privacy protection - no device-level data sharing</li>
                        <li>Aggregate campaign performance measurement</li>
                        <li>Elimination of IDFA dependency</li>
                    </ul>
                </div>

                <div class="flow-diagram">
                    <h3>üìà SKAN Data Flow</h3>
                    <div class="flow-step">
                        <strong>1. Ad Display</strong>
                        <p>User sees ad in source app</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>2. App Install</strong>
                        <p>User installs advertised app from App Store</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>3. Conversion Value Update</strong>
                        <p>App updates conversion value (0-63) based on user actions</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>4. Timer Window</strong>
                        <p>24-48 hour timer + random delay</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>5. Postback to Ad Network</strong>
                        <p>Apple sends attribution data to ad network</p>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üìä Marketing Outputs</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Campaign ID:</strong> Which campaign drove the install</li>
                        <li><strong>Conversion Value:</strong> 6-bit value (0-63) encoding post-install activity</li>
                        <li><strong>Source App ID:</strong> Where the ad was displayed (with privacy threshold)</li>
                        <li><strong>Coarse Conversion Value:</strong> Low/Medium/High buckets (SKAN 4.0+)</li>
                    </ul>
                </div>
            </div>

            <!-- AppsFlyer SKAN Tab -->
            <div id="appsflyer" class="tab-content">
                <h2 class="section-title">AppsFlyer SKAN Solution</h2>

                <div class="info-card">
                    <h3>üéØ What is AppsFlyer SKAN?</h3>
                    <p>AppsFlyer's advanced solution that maximizes the value of SKAdNetwork data through intelligent conversion value mapping, predictive analytics, and comprehensive reporting.</p>
                </div>

                <div class="info-card">
                    <h3>üí° Why AppsFlyer SKAN?</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Conversion Studio:</strong> Visual CV schema configuration</li>
                        <li><strong>SKAN Advanced Analytics:</strong> Predictive modeling and data enrichment</li>
                        <li><strong>Single Source of Truth:</strong> Unified dashboard for all attribution data</li>
                        <li><strong>Privacy Compliance:</strong> Full adherence to Apple's guidelines</li>
                        <li><strong>Real-time Updates:</strong> Immediate CV updates based on user actions</li>
                    </ul>
                </div>

                <div class="flow-diagram">
                    <h3>üîÑ AppsFlyer SKAN Data Flow</h3>
                    <div class="flow-step">
                        <strong>1. SDK Integration</strong>
                        <p>AppsFlyer SDK tracks events and manages CV updates</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>2. Event Mapping</strong>
                        <p>Events mapped to 6-bit conversion value schema</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>3. Smart CV Management</strong>
                        <p>Optimized CV updates within Apple's constraints</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>4. Data Collection</strong>
                        <p>SKAN postbacks received and processed</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>5. Analytics & Reporting</strong>
                        <p>Enriched data with predictive analytics in dashboard</p>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üìà Marketing Outputs with AppsFlyer</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Revenue Metrics:</strong> Predicted LTV, ARPU, Revenue bands</li>
                        <li><strong>Event Analytics:</strong> In-app event performance by campaign</li>
                        <li><strong>Cohort Analysis:</strong> User quality segmentation</li>
                        <li><strong>ROI Optimization:</strong> Campaign performance insights</li>
                        <li><strong>Fraud Protection:</strong> SKAN-specific fraud detection</li>
                    </ul>
                </div>
            </div>

            <!-- Implementation Tab -->
            <div id="implementation" class="tab-content">
                <h2 class="section-title">Flutter/Dart Implementation - Complete Guide</h2>

                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <span>üì± Complete AppsFlyer SKAN Manager Implementation</span>
                            <span class="accordion-arrow">‚ñº</span>
                        </div>
                        <div class="accordion-content">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-language">Flutter/Dart - Main Implementation File</span>
                                    <button class="copy-btn">üìã Copy</button>
                                </div>
                                <pre><code><span class="keyword">import</span> <span class="string">'package:appsflyer_sdk/appsflyer_sdk.dart'</span>;
<span class="keyword">import</span> <span class="string">'package:app_tracking_transparency/app_tracking_transparency.dart'</span>;
<span class="keyword">import</span> <span class="string">'package:shared_preferences/shared_preferences.dart'</span>;
<span class="keyword">import</span> <span class="string">'dart:async'</span>;
<span class="keyword">import</span> <span class="string">'dart:io'</span> show Platform;

<span class="comment">/// Main AppsFlyer SKAN Manager Class</span>
<span class="comment">/// Handles all tracking scenarios: consent granted, denied, and runtime changes</span>
<span class="keyword">class</span> <span class="function">AppsFlyerSKANManager</span> {
  <span class="comment">// Singleton pattern for consistent state management</span>
  <span class="keyword">static</span> <span class="keyword">final</span> AppsFlyerSKANManager _instance = AppsFlyerSKANManager._internal();
  <span class="keyword">factory</span> AppsFlyerSKANManager() => _instance;
  AppsFlyerSKANManager._internal();

  <span class="comment">// AppsFlyer SDK instance</span>
  AppsflyerSdk? _appsflyerSdk;
  
  <span class="comment">// Tracking state management</span>
  <span class="keyword">bool</span> _isInitialized = <span class="keyword">false</span>;
  <span class="keyword">bool</span> _hasConsent = <span class="keyword">false</span>;
  <span class="keyword">bool</span> _isStopped = <span class="keyword">false</span>;
  TrackingStatus? _currentTrackingStatus;
  
  <span class="comment">// Stream controllers for state changes</span>
  <span class="keyword">final</span> _consentStateController = StreamController&lt;<span class="keyword">bool</span>&gt;.broadcast();
  Stream&lt;<span class="keyword">bool</span>&gt; <span class="keyword">get</span> consentStateStream => _consentStateController.stream;
  
  <span class="comment">// Configuration constants</span>
  <span class="keyword">static</span> <span class="keyword">const</span> String AF_DEV_KEY = <span class="string">'YOUR_APPSFLYER_DEV_KEY'</span>;
  <span class="keyword">static</span> <span class="keyword">const</span> String APP_ID = <span class="string">'YOUR_APP_STORE_ID'</span>; <span class="comment">// iOS App Store ID</span>
  
  <span class="comment">/// Initialize the SDK based on current consent state</span>
  <span class="comment">/// This is the main entry point - call this on app start</span>
  <span class="keyword">Future</span>&lt;<span class="keyword">void</span>&gt; <span class="function">initialize</span>() <span class="keyword">async</span> {
    print(<span class="string">'üöÄ AppsFlyerSKANManager: Starting initialization...'</span>);
    
    <span class="comment">// Only initialize on iOS (SKAN is iOS-only)</span>
    <span class="keyword">if</span> (!Platform.isIOS) {
      print(<span class="string">'‚ö†Ô∏è SKAN is iOS only. Skipping initialization on this platform.'</span>);
      <span class="keyword">return</span>;
    }
    
    <span class="comment">// Check if already initialized to prevent duplicate setup</span>
    <span class="keyword">if</span> (_isInitialized) {
      print(<span class="string">'‚ö†Ô∏è Already initialized. Skipping duplicate initialization.'</span>);
      <span class="keyword">return</span>;
    }
    
    <span class="comment">// Check current ATT status</span>
    <span class="keyword">await</span> _checkAndHandleTrackingStatus();
    
    <span class="comment">// Set up listener for app lifecycle changes</span>
    <span class="keyword">await</span> _setupAppLifecycleListener();
    
    _isInitialized = <span class="keyword">true</span>;
    print(<span class="string">'‚úÖ AppsFlyerSKANManager: Initialization complete'</span>);
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üõ°Ô∏è Complete Implementation Summary</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Initialization:</strong> Automatic detection and handling of consent status on app launch</li>
                        <li><strong>Consent Granted:</strong> Full tracking with IDFA, detailed events, and rich analytics</li>
                        <li><strong>Consent Denied:</strong> SKAN-only mode with anonymized, privacy-safe tracking</li>
                        <li><strong>Runtime Changes:</strong> Real-time SDK adjustment when users change privacy settings</li>
                        <li><strong>Start/Stop Functions:</strong> Pause and resume tracking as needed</li>
                        <li><strong>Anonymization:</strong> Toggle between anonymous and identified tracking</li>
                        <li><strong>API Integration:</strong> Server-to-server events and SKAN data retrieval</li>
                        <li><strong>State Management:</strong> Stream-based updates for reactive UI changes</li>
                    </ul>
                </div>
            </div>

            <!-- Configuration Tab -->
            <div id="configuration" class="tab-content">
                <h2 class="section-title">AppsFlyer Dashboard Configuration</h2>

                <div class="info-card">
                    <h3>üìã Step-by-Step Configuration</h3>
                    <ol style="margin-left: 20px; margin-top: 10px; line-height: 2;">
                        <li><strong>Access SKAN Dashboard:</strong> Navigate to AppsFlyer ‚Üí SKAN ‚Üí Conversion Studio</li>
                        <li><strong>Create Schema:</strong> Click "Create New Schema" or edit existing</li>
                        <li><strong>Select Measurement Mode:</strong> Choose between "Revenue" or "Engagement" focus</li>
                        <li><strong>Configure Conversion Values:</strong> Map your 6-bit schema (0-63 values)</li>
                        <li><strong>Set Event Priorities:</strong> Order events by business importance</li>
                        <li><strong>Define Measurement Windows:</strong> Set activity windows (0-24h, 24-48h, 48-72h)</li>
                        <li><strong>Test Configuration:</strong> Use sandbox mode for validation</li>
                        <li><strong>Deploy Schema:</strong> Activate for production traffic</li>
                    </ol>
                </div>

                <h3 style="margin-top: 30px;">üéØ Example Configuration: 6-Bit Schema</h3>
                
                <div class="schema-grid">
                    <div class="schema-card">
                        <div class="bit-value">Bits 0-1</div>
                        <div class="event-name">Revenue Bands</div>
                        <div class="event-type">$0, $1-50, $51-100, $100+</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 2</div>
                        <div class="event-name">HBB Revenue</div>
                        <div class="event-type">Yes/No Indicator</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 3</div>
                        <div class="event-name">Mobile Revenue</div>
                        <div class="event-type">Yes/No Indicator</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 4</div>
                        <div class="event-name">Sign Up</div>
                        <div class="event-type">Completed/Not</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 5</div>
                        <div class="event-name">Add to Cart</div>
                        <div class="event-type">Performed/Not</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 6</div>
                        <div class="event-name">Initiate Checkout</div>
                        <div class="event-type">Started/Not</div>
                    </div>
                </div>

                <div class="info-card" style="margin-top: 30px;">
                    <h3>üìä Conversion Value Calculation Example</h3>
                    <p>Binary representation: <code>110111</code> = Decimal: <code>55</code></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Bit 0-1: 11 (binary) = 3 (decimal) = $100+ revenue band</li>
                        <li>Bit 2: 1 = HBB Revenue occurred</li>
                        <li>Bit 3: 0 = No Mobile Revenue</li>
                        <li>Bit 4: 1 = Sign Up completed</li>
                        <li>Bit 5: 1 = Add to Cart performed</li>
                        <li>Bit 6: 1 = Checkout initiated</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>‚ö° Configuration Best Practices</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Start with simple schemas and iterate</li>
                        <li>Focus on highest-value events first</li>
                        <li>Use revenue bands for monetization apps</li>
                        <li>Consider engagement metrics for non-monetized apps</li>
                        <li>Test thoroughly before production deployment</li>
                        <li>Monitor and optimize based on postback data</li>
                    </ul>
                </div>
            </div>

            <!-- Interactive Demo Tab -->
            <div id="demo" class="tab-content">
                <h2 class="section-title">Interactive SKAN Simulator</h2>

                <div class="interactive-demo">
                    <h3>üéÆ Simulate SKAN Event Flow</h3>
                    <p>Click events to see how they update the conversion value in real-time!</p>
                    
                    <div class="demo-controls">
                        <button class="demo-btn" id="revenue-btn">üí∞ Revenue $150</button>
                        <button class="demo-btn" id="hbb-btn">üì∫ HBB Revenue</button>
                        <button class="demo-btn" id="mobile-btn">üì± Mobile Revenue</button>
                        <button class="demo-btn" id="signup-btn">‚úçÔ∏è Sign Up</button>
                        <button class="demo-btn" id="cart-btn">üõí Add to Cart</button>
                        <button class="demo-btn" id="checkout-btn">üí≥ Checkout</button>
                        <button class="demo-btn" id="reset-btn">üîÑ Reset</button>
                    </div>
                    
                    <div class="demo-output" id="demo-output">
                        <h4>Current State:</h4>
                        <p><span class="status-indicator status-denied"></span>Waiting for events...</p>
                        <div id="conversion-display" style="margin-top: 15px;">
                            <p><strong>Binary:</strong> <span class="highlight">000000</span></p>
                            <p><strong>Decimal CV:</strong> <span class="highlight">0</span></p>
                            <p><strong>Events Tracked:</strong> None</p>
                        </div>
                    </div>
                </div>

                <div class="info-card" style="margin-top: 30px;">
                    <h3>üöÄ Next Steps</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Implement SDK in your Flutter app</li>
                        <li>Configure conversion value schema in AppsFlyer dashboard</li>
                        <li>Test with Apple's SKAdNetwork testing profile</li>
                        <li>Monitor initial postbacks in sandbox</li>
                        <li>Optimize schema based on early results</li>
                        <li>Deploy to production with confidence</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // State management
            let conversionState = {
                revenue: 0,
                hbb_revenue: false,
                mobile_revenue: false,
                signup: false,
                add_cart: false,
                checkout: false
            };

            // Tab switching functionality
            const navTabs = document.querySelectorAll('.nav-tab');
            const tabContents = document.querySelectorAll('.tab-content');

            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    navTabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });

            // Accordion functionality
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    const arrow = this.querySelector('.accordion-arrow');
                    
                    content.classList.toggle('active');
                    arrow.classList.toggle('active');
                });
            });

            // Copy code functionality
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const codeBlock = this.closest('.code-block');
                    const code = codeBlock.querySelector('code').textContent;
                    
                    // Create textarea to copy from
                    const textarea = document.createElement('textarea');
                    textarea.value = code;
                    textarea.style.position = 'fixed';
                    textarea.style.opacity = '0';
                    document.body.appendChild(textarea);
                    textarea.select();
                    
                    try {
                        document.execCommand('copy');
                        const originalText = this.innerHTML;
                        this.innerHTML = '‚úÖ Copied!';
                        this.style.background = '#00b894';
                        
                        setTimeout(() => {
                            this.innerHTML = originalText;
                            this.style.background = '#667eea';
                        }, 2000);
                    } catch (err) {
                        console.error('Failed to copy:', err);
                    }
                    
                    document.body.removeChild(textarea);
                });
            });

            // Interactive Demo functionality
            function updateConversionDisplay() {
                // Calculate binary representation
                let binary = '';
                binary += conversionState.checkout ? '1' : '0';
                binary += conversionState.add_cart ? '1' : '0';
                binary += conversionState.signup ? '1' : '0';
                binary += conversionState.mobile_revenue ? '1' : '0';
                binary += conversionState.hbb_revenue ? '1' : '0';
                binary += conversionState.revenue.toString(2).padStart(2, '0');
                
                // Reverse for correct bit order
                binary = binary.split('').reverse().join('');
                
                // Calculate decimal value
                const decimal = parseInt(binary, 2);
                
                // Collect tracked events
                const trackedEvents = [];
                if (conversionState.revenue > 0) trackedEvents.push(`Revenue Band ${conversionState.revenue}`);
                if (conversionState.hbb_revenue) trackedEvents.push('HBB Revenue');
                if (conversionState.mobile_revenue) trackedEvents.push('Mobile Revenue');
                if (conversionState.signup) trackedEvents.push('Sign Up');
                if (conversionState.add_cart) trackedEvents.push('Add to Cart');
                if (conversionState.checkout) trackedEvents.push('Checkout');
                
                // Update display
                const displayElement = document.getElementById('conversion-display');
                if (displayElement) {
                    displayElement.innerHTML = `
                        <p><strong>Binary:</strong> <span class="highlight">${binary}</span></p>
                        <p><strong>Decimal CV:</strong> <span class="highlight">${decimal}</span></p>
                        <p><strong>Events Tracked:</strong> ${trackedEvents.length > 0 ? trackedEvents.join(', ') : 'None'}</p>
                        <p style="margin-top: 10px;"><span class="status-indicator status-granted"></span>Conversion value updated!</p>
                    `;
                }
            }

            // Demo button event listeners
            const revenueBtn = document.getElementById('revenue-btn');
            if (revenueBtn) {
                revenueBtn.addEventListener('click', function() {
                    conversionState.revenue = 3; // $100+ band
                    updateConversionDisplay();
                });
            }

            const hbbBtn = document.getElementById('hbb-btn');
            if (hbbBtn) {
                hbbBtn.addEventListener('click', function() {
                    conversionState.hbb_revenue = true;
                    updateConversionDisplay();
                });
            }

            const mobileBtn = document.getElementById('mobile-btn');
            if (mobileBtn) {
                mobileBtn.addEventListener('click', function() {
                    conversionState.mobile_revenue = true;
                    updateConversionDisplay();
                });
            }

            const signupBtn = document.getElementById('signup-btn');
            if (signupBtn) {
                signupBtn.addEventListener('click', function() {
                    conversionState.signup = true;
                    updateConversionDisplay();
                });
            }

            const cartBtn = document.getElementById('cart-btn');
            if (cartBtn) {
                cartBtn.addEventListener('click', function() {
                    conversionState.add_cart = true;
                    updateConversionDisplay();
                });
            }

            const checkoutBtn = document.getElementById('checkout-btn');
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', function() {
                    conversionState.checkout = true;
                    updateConversionDisplay();
                });
            }

            const resetBtn = document.getElementById('reset-btn');
            if (resetBtn) {
                resetBtn.addEventListener('click', function() {
                    conversionState = {
                        revenue: 0,
                        hbb_revenue: false,
                        mobile_revenue: false,
                        signup: false,
                        add_cart: false,
                        checkout: false
                    };
                    
                    const output = document.getElementById('demo-output');
                    if (output) {
                        output.innerHTML = `
                            <h4>Current State:</h4>
                            <p><span class="status-indicator status-denied"></span>Simulation reset - waiting for events...</p>
                            <div id="conversion-display" style="margin-top: 15px;">
                                <p><strong>Binary:</strong> <span class="highlight">000000</span></p>
                                <p><strong>Decimal CV:</strong> <span class="highlight">0</span></p>
                                <p><strong>Events Tracked:</strong> None</p>
                            </div>
                        `;
                    }
                });
            }

            // Schema card hover effects
            const schemaCards = document.querySelectorAll('.schema-card');
            schemaCards.forEach(card => {
                card.addEventListener('click', function() {
                    const eventName = this.querySelector('.event-name').textContent;
                    alert(`Event: ${eventName}\n\nThis event updates specific bits in the 6-bit conversion value to track user behavior while maintaining privacy.`);
                });
            });
        });
    </script>
</body>
</html>
